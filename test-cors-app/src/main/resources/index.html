<!DOCTYPE html>
<html>
<head>
    <title>CORS Vuln Demo</title>
</head>

<body>
<div id="content-pane"></div>
<script>
    function display(reqUrl) {
        let request = new XMLHttpRequest();
        request.open('GET', reqUrl, true);
        request.withCredentials = true;
        request.onload = function () {
            console.log(this.responseText);
            let data = JSON.parse(this.responseText);
            let divElement = document.createElement('div');
            let titleElement = document.createElement('h4');
            titleElement.innerText = 'cross-origin request URL: ' + reqUrl;
            let headersContent = document.createTextNode(this.responseText);
            let headersTitle = document.createElement('b');
            headersTitle.innerText = 'headers:';
            let cookiesContent = document.createTextNode(JSON.stringify(data.cookie));
            let cookiesTitle = document.createElement('b');
            cookiesTitle.innerText = 'cookies:';
            divElement.appendChild(titleElement);
            divElement.appendChild(headersTitle);
            divElement.appendChild(headersContent);
            let brElement = document.createElement('br');
            divElement.appendChild(brElement);
            divElement.appendChild(cookiesTitle);
            divElement.appendChild(cookiesContent);
            let contentPane = document.getElementById('content-pane');
            let hrElement = document.createElement('hr');
            contentPane.appendChild(hrElement);
            contentPane.appendChild(divElement);
        };
        request.onreadystatechange = function () {
            console.log('onreadystatechange');
        };
        request.send();
    }

    display('http://localhost:8081/cors-java-config');
    display('http://localhost:8081/cors-annotation-config');
    display('http://localhost:8082/cors-spring-security-config');
</script>
</body>
</html>
